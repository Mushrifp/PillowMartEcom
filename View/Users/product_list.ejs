
<style>
.buttonSave {
 --color: #B08EAD;
 padding: 0.8em 1.7em;
 background-color: transparent;
 border-radius: .3em;
 position: relative;
 overflow: hidden;
 cursor: pointer;
 transition: .5s;
 font-weight: 600;
 font-size: 11px;
 border: 1px solid;
 font-family: inherit;
 text-transform: uppercase;
 color: var(--color);
 z-index: 1;
}

.buttonSave::before, .buttonSave::after {
 content: '';
 display: block;
 width: 50px;
 height: 50px;
 transform: translate(-50%, -50%);
 position: absolute;
 border-radius: 50%;
 z-index: -1;
 background-color: var(--color);
 transition: 1s ease;
}

.buttonSave::before {
 top: -1em;
 left: -1em;
}

.buttonSave::after {
 left: calc(100% + 1em);
 top: calc(100% + 1em);
}

.buttonSave:hover::before, .buttonSave:hover::after {
 height: 510px;
 width: 510px;
}

.buttonSave:hover {
 color: #000000;
 
}

.buttonSave:active {
 filter: brightness(.8);
}


    .pagination {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }
    .pagination li {
      list-style-type: none;
      margin: 0 5px;
      padding: 10px 20px;
      background-color: #ffffff;
      color: #000000;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
      font-size: 16px;
      transition: 0.5s;
      box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px, rgba(0, 0, 0, 0.3) 0px 7px 13px -3px, rgba(0, 0, 0, 0.2) 0px -3px 0px inset;
    }
    .pagination li:hover {   
      background-color: #ffffff;
      box-shadow: rgba(17, 17, 26, 0.1) 0px 1px 0px;
      color: black;

    }
    .pagination .active {
      background-color: #c3c3c3;
      color: black;
    }
    #product-imageh {
     width: 100%;
     height: 100%;
     object-fit: cover;
    }
    .InputContainer {
        width: 210px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(to bottom,rgb(227, 213, 255),rgb(255, 231, 231));
        border-radius: 30px;
        overflow: hidden;
        cursor: pointer;
    }
    .input {
        width: 200px;
        height: 40px;
        caret-color: rgb(255, 106, 248);
        background: linear-gradient(to bottom,rgb(227, 213, 255),rgb(255, 231, 231));
        padding-left: 15px;
        letter-spacing: 0.8px;
        color: rgb(19, 19, 19);
        font-size: 13.4px;
    }
    #detailBtn{
        color: #B08EAD;
    }
    #detailBtn:hover{
        color: #ffffff;
    }


          .radio-buttons-container {
          display: flex;
          flex-direction: column;
      }

      .radio-button {
          display: flex;
          align-items: center;
      }

      .radio-button__input {
          position: absolute;
          opacity: 0;
          width: 0;
          height: 0;
      }

      .radio-button__label {
          position: relative;
          cursor: pointer;
          font-size: 16px;
          color: #333;
          transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1);
      }

      .radio-button__custom {
          position: relative;
          display: inline-block;
          width: 20px;
          height: 20px;
          border-radius: 50%;
          border: 2px solid #555;
          transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1);
      }

      .radio-button__input:checked + .radio-button__label .radio-button__custom {
          transform: scale(0.9);
          border: 5px solid #B08EAD;
      }

      .radio-button__input:checked + .radio-button__label {
          color: #B08EAD;
      }

      .radio-button__label:hover .radio-button__custom {
          border-color: #B08EAD;
          box-shadow: 0 0 10px #8e638a;
      }

</style>

<%- include('./layout/header.ejs') %>
<!--::header part start::-->
<%- include('./layout/navbar.ejs') %>
<section class="breadcrumb_part" style="height:100px">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb_iner">
                    <h2  id="RvText">Products</h2>
                </div>
            </div>
        </div>
    </div>
</section>
<header>

  </header>
 

<section class="">
    <div class="container-fluid" >
        <div class="row" >
            <!-- Left sidebar for filters -->
           <div class="col-lg-3">
    <div class="sidebar-wrapper" style="padding: 15px;">
        <div class="sidebar-item" style="padding: 10px; text-align: center;">
           <a href="/product"> <button type="submit" class="buttonSave" style="font-size: 16px; padding: 10px 20px;">Reset Filters</button></a>
        </div>
        <form action="/filterProduct" method="get">
            <!-- Category filter -->
            <div class="sidebar-item" style="border-bottom: 1px solid #ccc; margin-bottom: 15px; padding: 15px;">
                <h5 class="filter-title" style="font-size: 18px; color: #333; margin-bottom: 10px;">Category</h5>
                <div class="radio-buttons-container">
                    <div class="radio-button">
                        <input class="form-check-input category-checkbox radio-button__input" type="radio" name="category" value="all" id="categoryAll" style="margin-right: 10px;" <%= selectedCategory === 'all' ? 'checked' : '' %>>
                        <label class="radio-button__label" for="categoryAll">
                            <span class="radio-button__custom"></span>
                            All
                        </label>
                    </div>
                    <% for(let i = 0; i < cate.length; i++) { %>
                    <div class="radio-button">
                        <input class="form-check-input category-checkbox radio-button__input" type="radio" name="category" value="<%= cate[i]._id %>" id="category<%= i %>" style="margin-right: 10px;" <%= selectedCategory === cate[i].name ? 'checked' : '' %>>
                        <label class="radio-button__label" for="category<%= i %>">
                            <span class="radio-button__custom"></span>
                            <%= cate[i].name %>
                        </label>
                    </div>
                    <% } %>
                </div>
            </div>

            <!-- Filter options -->
            <div class="sidebar-item" style="border-bottom: 1px solid #ccc; margin-bottom: 15px; padding: 15px;">
                <h5 class="filter-title" style="font-size: 18px; color: #333; margin-bottom: 10px;">Filter</h5>
                <div class="radio-buttons-container">
                    <div class="radio-button">
                        <input class="form-check-input filter-checkbox radio-button__input" type="radio" name="filter" value="all" id="filterAll" style="margin-right: 10px;" <%= selectedFilter === 'all' ? 'checked' : '' %>>
                        <label class="radio-button__label" for="filterAll">
                            <span class="radio-button__custom"></span>
                            All
                        </label>
                    </div>
                    <div class="radio-button">
                        <input class="form-check-input filter-checkbox radio-button__input" type="radio" name="filter" value="lowToHigh" id="lowToHigh" style="margin-right: 10px;" <%= selectedFilter === 'lowToHigh' ? 'checked' : '' %>>
                        <label class="radio-button__label" for="lowToHigh">
                            <span class="radio-button__custom"></span>
                            Low to High
                        </label>
                    </div>
                    <div class="radio-button">
                        <input class="form-check-input filter-checkbox radio-button__input" type="radio" name="filter" value="highToLow" id="highToLow" style="margin-right: 10px;" <%= selectedFilter === 'highToLow' ? 'checked' : '' %>>
                        <label class="radio-button__label" for="highToLow">
                            <span class="radio-button__custom"></span>
                            High to Low
                        </label>
                    </div>
                </div>
            </div>

            <!-- Price filter -->
            <div class="sidebar-item" style="border-bottom: 1px solid #ccc; margin-bottom: 15px; padding: 15px;">
                <h5 class="filter-title" style="font-size: 18px; color: #333; margin-bottom: 10px;">Price</h5>
                <div class="radio-buttons-container">
                    <div class="radio-button">
                        <input class="form-check-input price-checkbox radio-button__input" type="radio" name="price" value="all" id="priceAll" style="margin-right: 10px;" <%= selectedPrice === 'all' ? 'checked' : '' %>>
                        <label class="radio-button__label" for="priceAll">
                            <span class="radio-button__custom"></span>
                            All
                        </label>
                    </div>
                    <div class="radio-button">
                        <input class="form-check-input price-checkbox radio-button__input" type="radio" name="price" value="100-500" id="price100-500" style="margin-right: 10px;" <%= selectedPrice === '100-500' ? 'checked' : '' %>>
                        <label class="radio-button__label" for="price100-500">
                            <span class="radio-button__custom"></span>
                            $100 - $500
                        </label>
                    </div>
                    <div class="radio-button">
                        <input class="form-check-input price-checkbox radio-button__input" type="radio" name="price" value="500-1000" id="price500-1000" style="margin-right: 10px;" <%= selectedPrice === '500-1000' ? 'checked' : '' %>>
                        <label class="radio-button__label" for="price500-1000">
                            <span class="radio-button__custom"></span>
                            $500 - $1000
                        </label>
                    </div>
                    <div class="radio-button">
                        <input class="form-check-input price-checkbox radio-button__input" type="radio" name="price" value="1000-1500" id="price1000-1500" style="margin-right: 10px;" <%= selectedPrice === '1000-1500' ? 'checked' : '' %>>
                        <label class="radio-button__label" for="price1000-1500">
                            <span class="radio-button__custom"></span>
                            $1000 - $1500
                        </label>
                    </div>
                </div>
            </div>

            <div class="sidebar-item" style="padding: 10px; text-align: center;">
                <button type="submit" class="buttonSave" style="font-size: 16px; padding: 10px 20px;">Apply Filters</button>
            </div>
        </form>
    </div>
</div>

            
            
            

            <!-- Right side for product listing -->
            <div class="col-lg-9">
                <div class="row justify-content-center" style="margin-top: 50px;">
                    <div class="col-lg-12">
                        <% if (Data.length != 0) { %>
                            <% for (let i = 0; i < Data.length; i++) { %>
                                <div class="row justify-content-center mb-3">
                                    <div class="col-md-12">
                                        <div class="card shadow-0 border rounded-3">
                                            <div class="card-body">
                                                <div class="row g-0">
                                                    <div class="col-xl-3 col-md-4 d-flex justify-content-center">
                                                        <div class="bg-image productZoom ripple rounded ripple-surface me-md-3 mb-3 mb-md-0" id="productEffect">
                                                            <% if (Data[i].image && Data[i].image.length > 0) { %>
                                                                <a href="/single-product?id=<%= Data[i]._id %>"><img id="product-imageh" src="/productImages/<%= Data[i].image[0] %>" class="w-100" style="border-radius: 5px;" /></a>
                                                            <% } else { %>
                                                                <a href="/single-product"><span></span></a>
                                                            <% } %>
                                                        </div>
                                                    </div>
                                                    <div class="col-xl-6 col-md-5 col-sm-7">
                                                        <a href="/single-product?id=<%= Data[i]._id %>"><h3><%= Data[i].productTitle %></h3></a>
                                                        <span>
                                                            <% if (Data[i].stock === 0) { %>
                                                                <span style="color: red;" class="ms-2 badge bg-danger text-white   ">Out of stock</span>
                                                            <% } else if (Data[i].stock <= 5) { %>
                                                                <span style="color: red;" class="ms-2 badge bg-danger text-white   ">Only a few left! Hurry up!</span>
                                                            <% } else { %>
                                                                <span style="color: green;" class="ms-2 badge bg-success text-white   ">In Stock</span>
                                                            <% } %>
                                                        </span>
                                                        <p class="text mb-4 mb-md-0"><%= Data[i].description %></p>
                                                    </div>
                                                    <div class="col-xl-3 col-md-3 col-sm-5">
                                                        <div class="d-flex flex-row align-items-center mb-1">
                                                            <h4 class="mb-1 me-1" style="color: rgb(0, 0, 0);">Price :</h4>
                                                            
                                                            <% if(Data[i].offPrice && Data[i].offPrice != 0){ %>
                                                                <div class="d-flex align-items-center">
                                                                    <h4 class="mb-1 me-1 ">$<%= Data[i].offPrice %></h4>
                                                                    <del class="mb-1 me-1 text-danger" style="font-size: medium; margin-left: 5px;">$<%= Data[i].price %></del> 
                                                                   
                                                                </div>
                                                            <% } else { %>
                                                                <h4 class="mb-1 ">$<%= Data[i].price %></h4>
                                                            <% } %>
                                                               
                                                        </div>
                                                        <div>
                                                            <% if(Data[i].percentage && Data[i].percentage != 0){ %>

                                                                <h2 class="ms-2 badge bg-success text-white">
                                                                    <span style="font-size: 10px; ">&#8595;</span> <%= Data[i].percentage %>% Offer
                                                                </h2>
                                                                
                                                            <% }  %>
                                                        </div>
                                                        <div class="mt-4">

                                                            <% if (Data[i].stock === 0) { %>
                                                                <button class="btn_3 " id="detailBtn" onclick="outOfStock()" >Add Cart</button>
                                                                <br><br>
                                                            <% } else  { %>
                                                                <button class="btn_3 " id="detailBtn" onclick="addCart('<%= Data[i]._id %>')" >Add Cart</button>
                                                                <br><br>
                                                            <% } %>

                                                            
                                                            <button class="btn_3 wishButton" type="button" data-id="<%= Data[i]._id %>">&nbsp;Wishlist</button>
                                                            <input type="hidden" id="SendID" value="<%= Data[i]._id %>">
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            <% } %>
                            
                            <% } else { %>
                            <div class="row justify-content-center mb-3">
                                <div class="col-md-12">
                                    <div class="card shadow-0 border rounded-3">
                                        <div class="card-body">
                                            <div class="col-12 text-center">
                                                <p>No product data available.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
 
 

    <!--  pagination -->
    <% if (typeof number !== "undefined" && Data.length != 0) { %>
        <div class="pagination">
            <ul style="display: flex; list-style-type: none;">
                <% let queryParams = `category=${selectedCategory}&price=${selectedPrice}&filter=${selectedFilter}`; %>
                <% if (number === 0) { %>
                    <a style="color: white;" href="/filterProduct?number=0&<%= queryParams %>"><li style="margin-right: 5px;">&laquo; Prev</li></a>
                <% } else { %>
                    <a style="color: white;" href="/filterProduct?number=<%= number - 1 %>&<%= queryParams %>"><li style="margin-right: 5px;">&laquo; Prev</li></a>
                <% } %>
    
                <% if (number > 0 && number != 1) { %>
                    <a style="color: white;" href="/filterProduct?number=0&<%= queryParams %>"><li style="margin-right: 5px;">0</li></a>
                <% } %>
    
                <% if (number > 1) { %>
                    <li style="margin-right: 5px;">...</li>
                <% } %>
    
                <% for (let i = Math.max(0, number - 1); i <= Math.min(answer, number + 1); i++) { %>
                    <% if (i === 0 || i === answer || (i >= number - 1 && i <= number + 1)) { %>
                        <% if (number === i) { %>
                            <a style="color: white;" href="/filterProduct?number=<%= i %>&<%= queryParams %>"><li class="active" style="margin-right: 5px;"><%= i %></li></a>
                        <% } else { %>
                            <a style="color: white;" href="/filterProduct?number=<%= i %>&<%= queryParams %>"><li style="margin-right: 5px;"><%= i %></li></a>
                        <% } %>
                    <% } %>
                <% } %>
    
                <% if (number < answer - 1) { %>
                    <li style="margin-right: 5px;">...</li>
                <% } %>
    
                <% if (number >= 0 && number != answer && number != answer-1 ) { %>
                    <a style="color: white;" href="/filterProduct?number=<%= answer %>&<%= queryParams %>"><li style="margin-right: 5px;"><%= answer %></li></a>
                <% } %>
    
                <% if (number === answer) { %>
                    <a style="color: white;" href="/filterProduct?number=<%= answer %>&<%= queryParams %>"><li>Next &raquo;</li></a>
                <% } else { %>
                    <a style="color: white;" href="/filterProduct?number=<%= number + 1 %>&<%= queryParams %>"><li>Next &raquo;</li></a>
                <% } %>
            </ul>
        </div>
    <% } %>
    
    
    
    
    <!--  pagination -->
    <br>
    <br>
    <!-- client review part here -->
    <section class="client_review">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="client_review_slider owl-carousel">
                        <div class="single_client_review">
                            <div class="client_img">
                                <img src="/img/client.png" alt="#">
                            </div>
                            <p>"Working in conjunction with humanitarian aid agencies, we have supported programmes to help alleviate human suffering.</p>
                            <h5>- Micky Mouse</h5>
                        </div>
                        <div class="single_client_review">
                            <div class="client_img">
                                <img src="/img/client_1.png" alt="#">
                            </div>
                            <p>"Working in conjunction with humanitarian aid agencies, we have supported programmes to help alleviate human suffering.</p>
                            <h5>- Micky Mouse</h5>
                        </div>
                        <div class="single_client_review">
                            <div class="client_img">
                                <img src="/img/client_2.png" alt="#">
                            </div>
                            <p>"Working in conjunction with humanitarian aid agencies, we have supported programmes to help alleviate human suffering.</p>
                            <h5>- Micky Mouse</h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- client review part end -->

    <!-- feature part here -->
    <section class="feature_part section_padding">
        <div class="container">
            <div class="row justify-content-between">
                <div class="col-lg-6">
                    <div class="feature_part_tittle">
                        <h3>Credibly innovate granular
                        internal or organic sources
                        whereas standards.</h3>
                    </div>
                </div>
                <div class="col-lg-5">
                    <div class="feature_part_content">
                        <p>Seamlessly empower fully researched growth strategies and interoperable internal or “organic” sources. Credibly innovate granular internal or “organic” sources whereas high standards in web-readiness.</p>
                    </div>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-lg-3 col-sm-6">
                    <div class="single_feature_part">
                        <img src="img/icon/feature_icon_1.svg" alt="#">
                        <h4>Credit Card Support</h4>
                    </div>
                </div>
                <div class="col-lg-3 col-sm-6">
                    <div class="single_feature_part">
                        <img src="img/icon/feature_icon_2.svg" alt="#">
                        <h4>Online Order</h4>
                    </div>
                </div>
                <div class="col-lg-3 col-sm-6">
                    <div class="single_feature_part">
                        <img src="img/icon/feature_icon_3.svg" alt="#">
                        <h4>Free Delivery</h4>
                    </div>
                </div>
                <div class="col-lg-3 col-sm-6">
                    <div class="single_feature_part">
                        <img src="img/icon/feature_icon_4.svg" alt="#">
                        <h4>Product with Gift</h4>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- feature part end -->

    <!-- subscribe part here -->
    <section class="subscribe_part section_padding">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="subscribe_part_content">
                        <h2>Get promotions & updates!</h2>
                        <p>Seamlessly empower fully researched growth strategies and interoperable internal or “organic” sources credibly innovate granular internal .</p>
                        <div class="subscribe_form">
                            <input type="email" placeholder="Enter your mail">
                            <a href="#" class="btn_1">Subscribe</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- subscribe part end -->

    <!--::footer_part start::-->
    <footer class="footer_part">
            
            
            <div class="copyright_part">
                <div class="container">
                    <div class="row ">
                        <div class="col-lg-12">
                            <div class="copyright_text">
                                <P><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="ti-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></P>
                                <div class="copyright_link">
                                    <a href="#">Turms & Conditions</a>
                                    <a href="#">FAQ</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </footer>
    <!--::footer_part end::-->

    <script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        var notyf = new Notyf();

        const wishButtons = document.querySelectorAll(".wishButton");
        
        for (let i = 0; i < wishButtons.length; i++) {
            wishButtons[i].addEventListener("click", function(event) {
                const id = event.target.getAttribute("data-id");
                axios.post(`/cart/addToWishlist?id=${id}`)
                    .then(function(response) {
                        if (response.data.added) {
                            notyf.success('Added To Wishlist');
                        } else if (response.data.notAdded) {
                            notyf.error('You Need To Login');
                        } else if (response.data.failed) {
                            notyf.error('Not Added');
                        }
                    })
                    .catch(function(error) {
                        console.error('Error:', error);
                    });
            });
        };
    
    function addCart (q){
        axios.post(`/cart/addCart?id=${q}`)
          .then(function(response) {
            if (response.data.added) {
              notyf.success('Added To Cart');
            } else if (response.data.failed) {
              notyf.error('Not Added');
            } else if (response.data.notAdded) {
              notyf.error('You Need To Login');
            }
          })
          .catch(function(error) {
            console.error('Error:', error);
          });
    }

    function outOfStock(){

               notyf.error("Sorry ! out of Stock")                                                                  
      }
    </script>



    <!-- jquery plugins here-->
    <script src="js/jquery-1.12.1.min.js"></script>
    <!-- popper js -->
    <script src="js/popper.min.js"></script>
    <!-- bootstrap js -->
    <script src="js/bootstrap.min.js"></script>
    <!-- easing js -->
    <script src="js/jquery.magnific-popup.js"></script>
    <!-- swiper js -->
    <script src="js/swiper.min.js"></script>
    <!-- swiper js -->
    <script src="js/mixitup.min.js"></script>
    <!-- particles js -->
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <!-- slick js -->
    <script src="js/slick.min.js"></script>
    <script src="js/jquery.counterup.min.js"></script>
    <script src="js/waypoints.min.js"></script>
    <script src="js/contact.js"></script>
    <script src="js/jquery.ajaxchimp.min.js"></script>
    <script src="js/jquery.form.js"></script>
    <script src="js/jquery.validate.min.js"></script>
    <script src="js/mail-script.js"></script>
    <!-- custom js -->
    <script src="js/custom.js"></script>

</body>

</html>