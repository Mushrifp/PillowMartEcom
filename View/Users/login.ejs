<%- include('./layout/header.ejs') %>

<style>
 .modals {
      display: none; 
      position: fixed; 
      z-index: 1; 
      left: 0;
      top: 0;
      width: 100%; 
      height: 100%;
      overflow: auto; 
      background-color: rgba(0,0,0,0.4);
    }

    .modal-contents {
      background-color: #fff;
      margin: 10% auto; 
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
      width: 400px;
      margin-top: 200px;
    }

    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }

    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
    }

    form {
      display: flex;
      flex-direction: column;
    }

    label {
      font-weight: bold;
      margin-top: 10px;
    }

    input[type="email"] {
      padding: 10px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
    }

    input[type="submit"] {
      padding: 5px;
      border-radius: 5px;
      background-color: #007bff00;
      color: #000000;
      cursor: pointer;
      transition: background-color 0.3s;
      border-color: #000000;
    }

    input[type="submit"]:hover {
      background-color: #B08EAD;
      color: #ffffff;
      border-color: #B08EAD;
    }

</style>

<%- include('./layout/navbar.ejs') %>
<!-- Header part end-->

<!--================login_part Area =================-->
<section class="login_part  ">
    <div class="container">
        <div class="row align-items-center" style="margin-top:55px;">
            <div class="col-lg-6 col-md-6">
                <div class="login_part_text text-center " style="box-shadow: 0 0 8px rgba(0, 0, 0, 0.617);">

                    <div class="login_part_text_iner">
                        <h2>New to our Shop?</h2>
                        <p>There are advances being made in science and technology
                            everyday, and a good example of this is the</p>
                        <a href="/register" class="btn_3">Create an Account</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="login_part_form">
                    <div class="login_part_form_iner">
                        <h3>Welcome Back Mush@123 ! <br>
                            Please Sign in now</h3>
                            <% if(typeof message !== "undefined") { %>
                                      <h4 style="color: rgb(255, 0, 0);" ><%= message %></h4>
                              <% } %>

                        <form class="row contact_form" action="/loginVerify" method="post" >
                            <div class="col-md-12 form-group p_star">
                                <input type="text" class="form-control" id="name" name="name" value="<%= typeof currentName !== "undefined" ? currentName : "" %>"
                                    placeholder="Username or Email " required>
                            </div>
                            <div class="col-md-12 form-group p_star">
                                <input type="password" class="form-control" id="password" name="password" value="<%= typeof currentPass !== "undefined" ? currentPass : "" %>"
                                    placeholder="Password" required>
                            </div>
                            <div class="col-md-12 form-group">
                                <button type="submit" value="submit" class="btn_3">
                                    log in
                                </button>
                            </div>
                        </form>
                        <div>
                            <img src="/7123025_logo_google_g_icon.png" style="height: 50px;" alt="hii"><a href="/auth/google">Sign With google?</a>
                            <button onclick="forgetPass()" style="border: none; background-color: white; color: gray; margin-left: 120px;" >forget password?</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!--================login_part end =================-->


<!-- modal forget password -->
<div id="myModal" class="modals">
    <div class="modal-contents" id="forgetModal">
        <span class="close" onclick="closeModal()">&times;</span>
        <h4 style="color: black; ">Please Enter Your Email Here To Send OTP</h4>
        <form id="forgetForm" onsubmit="event.preventDefault(); submitForgetEmail()">
            <label for="email">Email:</label>
            <input type="email" id="email-forgo" name="email" required><br>
            <span style="color: red;" id="err" >Profile Not Found</span>
            <input type="submit" id="forgo-sumbit" value="Submit">
        </form>
    </div>
</div>
<!-- forget password modal -->

<!--::footer_part start::-->
<footer class="footer_part">
    <div class="footer_iner section_bg">
        <div class="container">
            <div class="row justify-content-between align-items-center">
                <div class="col-lg-8">
                    <div class="footer_menu">
                        <div class="footer_logo">
                            <a href="index.html"><img src="img/logo.png" alt="#"></a>
                        </div>
                        <div class="footer_menu_item">
                            <a href="index.html">Home</a>
                            <a href="about.html">About</a>
                            <a href="product_list.html">Products</a>
                            <a href="#">Pages</a>
                            <a href="blog.html">Blog</a>
                            <a href="contact.html">Contact</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="social_icon">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-google-plus-g"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="copyright_part">
        <div class="container">
            <div class="row ">
                <div class="col-lg-12">
                    <div class="copyright_text">
                        <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="ti-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
                        <div class="copyright_link">
                            <a href="#">Turms & Conditions</a>
                            <a href="#">FAQ</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<!--::footer_part end::-->

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    const forgetPassModal = document.getElementById('myModal');
    const forgetErrModal = document.getElementById('err');
    const forgetForm = document.getElementById('forgetForm');
    const forgetPassEmail = document.getElementById('email-forgo');

    function forgetPass(){
        forgetErrModal.style.display = 'none';
        forgetPassModal.style.display="block";
    }

    function closeModal(){
        forgetPassModal.style.display = "none";
    }

    function submitForgetEmail(){
        axios.post("/forgetEmail",{email:forgetPassEmail.value})
        .then(function(response){
            if(response.data.noFound){
                forgetErrModal.style.display = 'block';
            }else if(response.data.email&&response.data.name){
                const email = response.data.email;
                const name = response.data.name;
                console.log(email,name)
                 window.location.href = `/otpForgetPass?email=${email}&name=${name}`;
            }
          })
          .catch(function(error){
            console.error('Error:',error);
          });
    }

    forgetPassEmail.addEventListener('input',function(){
        forgetErrModal.style.display = 'none';
    });

</script>

<!-- jquery plugins here-->
<script src="js/jquery-1.12.1.min.js"></script>
<!-- popper js -->
<script src="js/popper.min.js"></script>
<!-- bootstrap js -->
<script src="js/bootstrap.min.js"></script>
<!-- easing js -->
<script src="js/jquery.magnific-popup.js"></script>
<!-- swiper js -->
<script src="js/swiper.min.js"></script>
<!-- swiper js -->
<script src="js/mixitup.min.js"></script>
<!-- particles js -->
<script src="js/owl.carousel.min.js"></script>
<script src="js/jquery.nice-select.min.js"></script>
<!-- slick js -->
<script src="js/slick.min.js"></script>
<script src="js/jquery.counterup.min.js"></script>
<script src="js/waypoints.min.js"></script>
<script src="js/contact.js"></script>
<script src="js/jquery.ajaxchimp.min.js"></script>
<script src="js/jquery.form.js"></script>
<script src="js/jquery.validate.min.js"></script>
<script src="js/mail-script.js"></script>
<!-- custom js -->
<script src="js/custom.js"></script>


</body>

</html>
